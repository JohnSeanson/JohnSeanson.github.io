<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: "en" }}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>{% if page.title %}{{ page.title }} | {% endif %}{{ site.title }}</title>

  <!-- SEO Meta tags -->
  {% include seo.html %}

  <!-- Stylesheets -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}" />
  <link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}" />

  <!-- Favicon, fonts, etc -->
  {% include head.html %}
</head>
<body class="{{ page.layout }}">

<nav role="navigation" class="site-nav">
  <a href="{{ '/' | relative_url }}" class="site-logo">{{ site.title }}</a>

  <ul class="nav-links">
    <li><a href="{{ '/posts/' | relative_url }}">Posts</a></li>
    <li><a href="{{ '/categories/' | relative_url }}">Categories</a></li>
    <li><a href="{{ '/tags/' | relative_url }}">Tags</a></li>
  </ul>

  <form action="{{ '/search/' | relative_url }}" method="get" class="nav-search">
    <input type="search" name="q" placeholder="Search…" aria-label="Search site" />
    <button type="submit" aria-label="Search">&#128269;</button>
  </form>
</nav>

  </header>

  <div class="site-main">
    {{ content }}
  </div>

  <footer role="contentinfo" class="site-footer">
    <div class="wrapper">
      <p>© {{ site.time | date: '%Y' }} {{ site.title }} — All rights reserved.</p>
    </div>
    <div id="dark-mode-toggle" style="text-align: right; font-size: 0.8rem; cursor: pointer; user-select: none; margin-top: 0.5em;">
    <span id="dark-mode-text">Light Mode</span>
    </div>
  </footer>

  <!-- Optional scripts -->
  {% include scripts.html %}
  <script>
  const toggle = document.getElementById('theme-toggle');
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  const currentTheme = localStorage.getItem('theme') || (prefersDark ? 'dark' : 'light');

  document.body.classList.toggle('dark-mode', currentTheme === 'dark');
  toggle.textContent = currentTheme === 'dark' ? '☀️ Light Mode' : '🌙 Dark Mode';

  toggle.addEventListener('click', () => {
    const isDark = document.body.classList.toggle('dark-mode');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    toggle.textContent = isDark ? '☀️ Light Mode' : '🌙 Dark Mode';
  });
</script>

</body>
</html>
